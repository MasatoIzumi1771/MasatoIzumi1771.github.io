<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% set pageTitle = title and (title + ' - ' + site.title) or site.title %}
    {% set pageDescription = description or site.description %}
    {% set canonicalUrl = site.url and (site.url + page.url) or page.url %}
    {% set ogImage = ogImage or site.ogImage %}
    {% if site.url and ogImage %}
        {% set resolvedOgImage = site.url + ogImage %}
    {% else %}
        {% set resolvedOgImage = ogImage %}
    {% endif %}

    <title>{{ pageTitle }}</title>
    <meta name="description" content="{{ pageDescription }}">
    <link rel="canonical" href="{{ canonicalUrl }}">
    <meta property="og:title" content="{{ pageTitle }}">
    <meta property="og:description" content="{{ pageDescription }}">
    <meta property="og:url" content="{{ canonicalUrl }}">
    {% if page.url and page.url.indexOf('/articles/') == 0 %}
        <meta property="og:type" content="article">
    {% else %}
        <meta property="og:type" content="website">
    {% endif %}
    {% if resolvedOgImage %}
        <meta property="og:image" content="{{ resolvedOgImage }}">
    {% endif %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ pageTitle }}">
    <meta name="twitter:description" content="{{ pageDescription }}">
    {% if resolvedOgImage %}
        <meta name="twitter:image" content="{{ resolvedOgImage }}">
    {% endif %}
    <meta name="search-index" content="{{ (site.baseUrl or '/') ~ 'search-index.json' }}">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    {% block head %}{% endblock %}
</head>
<body id="top">
    <header class="header">
        <div class="header-inner">
            <h1 class="site-title"><a href="/index.html">Masato Izumi Portfolio</a></h1>
            <nav class="nav">
                <ul class="nav-list">
                    {% for item in nav %}
                        {% set isActive = page.url == item.url %}
                        {% if item.url == '/articles.html' and page.url and page.url.indexOf('/articles/') === 0 %}
                            {% set isActive = true %}
                        {% endif %}
                        <li class="nav-item">
                            <a class="{% if isActive %}active-link{% endif %}" href="{{ item.url }}">{{ item.label }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </nav>
            <button class="menu-toggle" aria-label="メニューを開く">
                <span class="menu-icon"></span>
            </button>
        </div>
    </header>

    <main class="main-content">
        {{ content | safe }}
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Masato Izumi Portfolio</p>
            <a class="footer-back-to-top" href="#top" aria-label="ページの先頭へ戻る">トップへ戻る</a>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
